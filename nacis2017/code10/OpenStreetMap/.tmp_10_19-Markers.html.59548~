<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
  <title>Popup</title>
  
    <script src="http://www.openlayers.org/api/OpenLayers.js"></script>
    <script src="http://www.openstreetmap.org/openlayers/OpenStreetMap.js"></script>        
    <script type="text/javascript">
        <!--
        var map;

//
// Ab hier kommen die Marker-Funktionen
//

    function addMarker(layer, lon, lat, popupContentHTML, farbe) {
 
    var ll = new OpenLayers.LonLat(lon, lat).transform(map.displayProjection,  map.projection);
    var data = {};
        if(farbe=="rot"){ 
        data.icon = new OpenLayers.Icon('mm_30_red.png',
                                        new OpenLayers.Size(18, 30), 
                                        new OpenLayers.Pixel(-9, -30));
        }
        if(farbe=="gelb"){
        data.icon = new OpenLayers.Icon('osmgelb.gif',
                                        new OpenLayers.Size(18, 30), 
                                        new OpenLayers.Pixel(-9, -30));
        }

    var feature = new OpenLayers.Feature(layer, ll, data); 
    feature.closeBox = true;
    feature.popupClass = OpenLayers.Class(OpenLayers.Popup.FramedCloud, {minSize: new OpenLayers.Size(200, 80) } );
    feature.data.popupContentHTML = popupContentHTML;
    feature.data.overflow = "hidden";
 
    var marker = new OpenLayers.Marker(ll,data.icon);
    marker.feature = feature;
 
    var markerClick = function(evt) {
        if (this.popup == null) {
            this.popup = this.createPopup(this.closeBox);
            map.addPopup(this.popup);
            this.popup.show();
        } else {
            this.popup.toggle();
        }
        OpenLayers.Event.stop(evt);
    };
    marker.events.register("mousedown", feature, markerClick);

    layer.addMarker(marker);
}
 
//
// Ab hier kommt wieder das uebliche Zeug
//
       
        function init(){
            map = new OpenLayers.Map('map',
                    { maxExtent: new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34),
                      numZoomLevels: 19,
                      maxResolution: 156543.0399,
                      units: 'm',
                      projection: new OpenLayers.Projection("EPSG:900913"),
                      displayProjection: new OpenLayers.Projection("EPSG:4326"),
                      controls: []
                    });


            map.addControl(new OpenLayers.Control.LayerSwitcher());
            map.addControl(new OpenLayers.Control.PanZoomBar());
            map.addControl(new OpenLayers.Control.Navigation());
            map.addControl(new OpenLayers.Control.MousePosition());
            map.addControl(new OpenLayers.Control.Attribution());
            
            var layerMapnik  = new OpenLayers.Layer.OSM.Mapnik("OSM:   Mapnik");

//
// Ab hier wirds fuer den Markerlayer interessant
//
            var layerpkt =     new OpenLayers.Layer.Markers("marker",{projection: new OpenLayers.Projection("EPSG:4326")});
            map.addLayers([layerMapnik,layerpkt]);
//
// Ab hier werden die Marker gesetzt
//           
            addMarker(layerpkt, 11.58, 48.13, "M&uuml;nchen", "rot");
            addMarker(layerpkt, 12.33, 45.43, "Venedig", "gelb");  
            addMarker(layerpkt,  8.54, 47.37, "Z&uuml;rich", "rot");
            
//
// Ab hier wirds wieder uninteressant
//

        
            map.setCenter(new OpenLayers.LonLat(11,47).transform(new OpenLayers.Projection("EPSG:4326"), new OpenLayers.Projection("EPSG:900913")),6);
        }
        // -->
    </script>


  </head>
  <body onLoad="init()">
    <div id="map" style="width: 700px; height: 300px;"></div>

  </body>
</html>